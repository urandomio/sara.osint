# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Sara's OSINT Resources — a static site cataloguing OSINT (Open Source Intelligence) tools, techniques, and resources. Deployed to GitHub Pages at `https://urandomio.github.io/sara.osint`.

## Commands

```bash
bun install          # Install dependencies
bun run dev          # Start Astro dev server (localhost:4321)
bun run build        # Type-check then build (astro check && astro build)
bun run check        # TypeScript type-checking only
bun run lint         # ESLint
bun run preview      # Preview production build locally
treefmt              # Format all files (requires Nix devShell)
```

## Architecture

**Stack:** Astro 5 static site, Tailwind CSS 4 (via Vite plugin), TypeScript, Bun package manager.

**Key directories:**
- `src/layouts/BaseLayout.astro` — Single shared layout: nav, background layers, footer. All pages use this.
- `src/pages/` — ~41 `.astro` page files. File-based routing with Astro's conventions.
- `src/styles/global.css` — Tailwind import + custom utility classes (`gradient-text`, `surface`, `focus-ring`) and prose component styles.
- `public/assets/` — SVG assets (grid, noise, radar) used by the layout background effects.
- `scripts/import-osint-al.mjs` — One-time import script that converted a mirror of osint.al (Google Sites) into Astro pages using `@mozilla/readability` + `jsdom`.

**Page patterns:**
- **Imported pages** (majority): Generated by the import script. Use `set:html={...}` with raw HTML strings. Follow the pattern: frontmatter imports BaseLayout → `<article class="surface p-6 sm:p-10 prose prose-invert max-w-none">` wrapper → `<h1>` → `<div set:html={...} />`.
- **Hand-authored pages** (blog posts, blog index): Written as normal Astro components with inline Tailwind markup. Blog index (`src/pages/blog/index.astro`) has a hardcoded `posts` array — new posts must be added there manually.

**Routing:** All internal links must be prefixed with `/sara.osint` (the `base` path in `astro.config.mjs`). External links should have `target="_blank" rel="noopener noreferrer"`.

## Deployment

Pushes to `main` trigger GitHub Actions (`.github/workflows/deploy.yml`) which runs `bun install && bun run build` and deploys `dist/` to GitHub Pages.

## Nix

A `flake.nix` provides a dev shell with bun, node 22, and treefmt (prettier + nixfmt). Enter with `nix develop`.
